@using FlightoUs.Bll
@using FlightoUs.Model.Data
@section Scripts
{
    <script src="~/js/CRM/Admin/User/AddEditLead.js?v=@DateTime.Now.Ticks.ToString()"></script>
}
@{
    var data = (Lead)ViewBag.data;
    var Title = ViewBag.title;
    BllUser bllUser = new BllUser();
    var userdata = bllUser.GetAllUsers();
    var remarksData = (Remarks)ViewBag.remarks;

}

<input type="hidden" id="hfLeadId" value="@data.Id" />
<div class="row">

    <div class="col-lg-3"></div>
    <div class="col-lg-6">
        <div id="BasicInfo" class="card" style="padding-bottom: 0px !important; margin-bottom: 0px;">
            <div class="card-header">
                <strong>@Title</strong>
            </div>

            <div class="card-body card-block">
                <div id="div_message" class="note failure">
                    <p>
                        <span id="span_message"></span>
                    </p>
                </div>

                <div class="row form-group">
                    <div class="col col-md-3"><label for="hf-email" class=" form-control-label">First Name</label></div>
                    <div class="col-12 col-md-9">
                        <input class="form-control" id="txtFirstName" type="text" onkeypress="return /[a-z]/i.test(event.key)" value="@data.FirstName" required maxlength="20">
                    </div>
                </div>




                <div class="row form-group">
                    <div class="col col-md-3"><label for="hf-email" class=" form-control-label">Last Name</label></div>
                    <div class="col-12 col-md-9">
                        <input class="form-control" id="txtLastName" type="text" onkeypress="return /[a-z]/i.test(event.key)" value="@data.LastName" required maxlength="20">
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col col-md-3"><label for="hf-email" class=" form-control-label">User Name</label></div>
                    <div class="col-12 col-md-9">
                        <input class="form-control" id="txtUserName" type="text" onkeypress="return /[a-z]/i.test(event.key)" value="@data.UserName" required maxlength="20">
                    </div>
                </div>


                <div class="row form-group">
                    <div class="col col-md-3"><label for="hf-email" class=" form-control-label">Created By</label></div>
                    <div class="col-12 col-md-9">
                        <select class="form-control" id="ddlUser" name="ddlUser" required @*@(ViewBag.IsAdd ? "" : "disabled")*@>
                            <option value="">Please Select</option>
                            @foreach (var user in userdata)
                            {
                                if (user.Id == data.CreatedBy)
                                {
                                    <option value="@user.Id" selected>@Html.Raw(user.FirstName + ' ' + user.LastName)</option>
                                }
                                else
                                {
                                    <option value="@user.Id">@Html.Raw(user.FirstName + ' ' + user.LastName)</option>
                                }

                            }
                        </select>
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col col-md-3"><label for="hf-email" class=" form-control-label">Assign To</label></div>
                    <div class="col-12 col-md-9">
                        <select class="form-control" id="ddlUser" name="ddlUser" required @*@(ViewBag.IsAdd ? "" : "disabled")*@>
                            <option value="">Please Select</option>
                            @foreach (var user in userdata)
                            {
                                <option value="@user.Id">@Html.Raw(user.FirstName + ' ' + user.LastName)</option>
                            }
                        </select>
                    </div>
                </div>

                <div class="row form-group">
                    <div class="col col-md-3"><label for="hf-email" class=" form-control-label">CNIC</label></div>
                    <div class="col-12 col-md-9">
                        <input class="form-control" id="txtCNIC" type="text" onkeypress="return /[a-z]/i.test(event.key)" value="@data.CNIC" required maxlength="20">
                    </div>
                </div>



                <div class="row form-group">
                    <div class="col col-md-3"><label for="hf-email" class=" form-control-label">Email</label></div>
                    <div class="col-12 col-md-9">
                        <input class="form-control" id="txtEmail" type="text" value="@data.Email" required maxlength="500">
                    </div>
                </div>


                <div class="row form-group">
                    <div class="col col-md-3"><label for="hf-email" class=" form-control-label">Telephone</label></div>
                    <div class="col-12 col-md-9">
                        <input class="form-control" id="txtTelephone" type="text" required onkeypress="return (event.charCode !=8 && event.charCode ==0 || (event.charCode >= 48 && event.charCode <= 57))" value="@data.Telephone" maxlength="20">
                    </div>
                </div>


            </div>

        </div>


        <div class="card-footer">
            <button type="button" class="btn btn-primary btn-sm" onclick="SaveUser();">
                <i class="material-icons " id="iconcss" style="">save</i>Save
            </button>
            <button type="reset" class="btn btn-danger btn-sm" onclick="Cancel();">
                <i class="material-icons" id="iconcss">cancel</i>Cancel
            </button>
        </div>
    </div>
</div>
<div class="col-lg-3"></div>


<!--
Remarks    
-->
<div style="display:@(ViewBag.IsAdd ? "inline" : "none")">
    <div class="right mT10">
        <a class="btn btn-success btn-sm" asp-action="AddEditRemarks" asp-controller="Home" asp-route-Id="0"> Add Remarks </a>
    </div>


    <div class="clearfix"></div>
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-header">
                    <strong class="card-title">Remarks</strong>&nbsp; <span id="spanTotalRecords"></span>
                </div>
                <div class="card-body">
                    <div id="div_message" class="note failure">
                        <p>
                            <span id="span_message"></span>
                        </p>
                    </div>
                    <div class="c1 filter">

                        <div class="right">
                            Search: <input id="txtSearch" style="" type="text" class="form-control search">
                            <a title="Search" style="cursor:pointer; margin-left:5px; " onclick="SearchUsers();"><i class="material-icons " style="position:relative; top:5px;">search</i></a>
                            <a title="Reset" style="cursor:pointer;" onclick="ResetUsers();"><i class="material-icons" style="position:relative; top:5px;">clear</i></a>
                        </div>
                    </div>

                    <table id="tbl" class="table">
                        <thead>
                            <tr>
                                <th class="gridSortingMenu" scope="col" sortable datafield="createdDate" caption="CreatedDate"></th>
                                <th class="gridSortingMenu" scope="col" sortable datafield="details" caption="Details"></th>
                                <th class="gridSortingMenu" scope="col" sortable datafield="leadName" caption="Lead name"></th>

                                <th scope="col" style="width:180px;">Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    @*Show Pager*@

                    <div id="div_no_found" class="alert alert-info hide" role="alert">
                        No Remarks Found. Please click on Add Remarks button to add a Remark.
                        @*This is a info alert with <a href="#" class="alert-link">an example link</a>. Give it a click if you like.*@
                    </div>




                </div>
            </div>
        </div>


    </div>
</div>


<script id="ListTemplateCustomers" type="text/x-jsrender">
    <tr>
        <td>{{:createdDate}}</td>
        <td>{{:details}}</td>
        <td>{{:leadName}}</td>

        <td>
            <a onclick="DeleteLeads({{:id}});" class="text-danger " style="cursor:pointer;"><i class="material-icons">delete_outline</i></a>
        </td>
    </tr>


</script>